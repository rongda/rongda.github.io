<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>JavaScript的技巧、秘诀和最佳实践 | Roda</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="1. 首次为变量赋值时务必使用var关键字变量没有声明而直接赋值得话,默认使用一个新的全局变量，要尽量避免使用全局变量;
2. 使用 === 取代 ====和!=操作符会在需要的情况下自动转换数据类型.但===和!==不会,它们会同时比较值和数据类型,这也使得它们要比==和!=快;
3. underfined、null、0、false、NaN、空字符串的逻辑结果均为false4. 行尾使用分号实践">
<meta property="og:type" content="article">
<meta property="og:title" content="JavaScript的技巧、秘诀和最佳实践">
<meta property="og:url" content="http://yoursite.com/2016/02/24/Flower/index.html">
<meta property="og:site_name" content="Roda">
<meta property="og:description" content="1. 首次为变量赋值时务必使用var关键字变量没有声明而直接赋值得话,默认使用一个新的全局变量，要尽量避免使用全局变量;
2. 使用 === 取代 ====和!=操作符会在需要的情况下自动转换数据类型.但===和!==不会,它们会同时比较值和数据类型,这也使得它们要比==和!=快;
3. underfined、null、0、false、NaN、空字符串的逻辑结果均为false4. 行尾使用分号实践">
<meta property="og:updated_time" content="2016-03-03T07:07:38.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="JavaScript的技巧、秘诀和最佳实践">
<meta name="twitter:description" content="1. 首次为变量赋值时务必使用var关键字变量没有声明而直接赋值得话,默认使用一个新的全局变量，要尽量避免使用全局变量;
2. 使用 === 取代 ====和!=操作符会在需要的情况下自动转换数据类型.但===和!==不会,它们会同时比较值和数据类型,这也使得它们要比==和!=快;
3. underfined、null、0、false、NaN、空字符串的逻辑结果均为false4. 行尾使用分号实践">
  
  


  <link rel="stylesheet" href="/css/styles.css" type="text/css">
  

  

</head>

<body>
  <div class="content-post">
  <a class="avatar" href="/archives">
    <img src="/images/avatar.jpg" alt="Roda2016" />
  </a>
  <article id="post-Flower" class="article article-type-post" itemscope itemprop="blogPost">

  <header class="article-header">
    
  
    <div class="article-title article" >
      JavaScript的技巧、秘诀和最佳实践
    </div>
  


  </header>

  <div class="article-meta">
    2016-02-24

    <span> | </span>

    <span class="article-author">Roda</span>

    

  </div>
  <div class="article-inner">

    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="1-首次为变量赋值时务必使用var关键字"><a href="#1-首次为变量赋值时务必使用var关键字" class="headerlink" title="1. 首次为变量赋值时务必使用var关键字"></a>1. 首次为变量赋值时务必使用var关键字</h3><p><code>变量没有声明而直接赋值得话,默认使用一个新的全局变量，要尽量避免使用全局变量;</code></p>
<h3 id="2-使用-取代"><a href="#2-使用-取代" class="headerlink" title="2. 使用 === 取代 =="></a>2. 使用 === 取代 ==</h3><p><code>==和!=操作符会在需要的情况下自动转换数据类型.但===和!==不会,它们会同时比较值和数据类型,这也使得它们要比==和!=快;</code></p>
<h3 id="3-underfined、null、0、false、NaN、空字符串的逻辑结果均为false"><a href="#3-underfined、null、0、false、NaN、空字符串的逻辑结果均为false" class="headerlink" title="3. underfined、null、0、false、NaN、空字符串的逻辑结果均为false"></a>3. underfined、null、0、false、NaN、空字符串的逻辑结果均为false</h3><h3 id="4-行尾使用分号"><a href="#4-行尾使用分号" class="headerlink" title="4. 行尾使用分号"></a>4. 行尾使用分号</h3><p><code>实践中最好还是使用分号,忘了写也没事,大部分情况下JavaScript解释器都会自动添加;</code></p>
<h3 id="5-使用对象构造器"><a href="#5-使用对象构造器" class="headerlink" title="5. 使用对象构造器"></a>5. 使用对象构造器</h3><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span><span class="params">(firstName, LastName)</span></span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.firstName = firstName;</span><br><span class="line">  <span class="keyword">this</span>.lastName = lastName;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> roda = <span class="keyword">new</span> Person(<span class="string">"Roda"</span>, <span class="string">"Flower"</span>);</span><br></pre></td></tr></table></figure>
<h3 id="6-小心使用-typeof-、instanceof-、contructor"><a href="#6-小心使用-typeof-、instanceof-、contructor" class="headerlink" title="6. 小心使用 typeof 、instanceof 、contructor"></a>6. 小心使用 typeof 、instanceof 、contructor</h3><p> typeof:JavaScript一元操作符,用于以字符串的形式返回变量的原始类型,注意,typeof null也会返回object,大多数的对象类型（数组Array、时间Date等）也会返回object;<br> contructor:内部原型属性,可以通过代码重写;<br> instanceof:JavaScript操作符,会在原型链中的构造器中搜索,找到则返回true,否则返回false;<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="string">"a"</span>,<span class="string">"b"</span>,<span class="string">"c"</span>];</span><br><span class="line"><span class="keyword">typeof</span> arr; <span class="comment">//object;</span></span><br><span class="line">arr <span class="keyword">instanceof</span> <span class="built_in">Array</span>; <span class="comment">//true;</span></span><br><span class="line">arr.constructor(); <span class="comment">//Array</span></span><br></pre></td></tr></table></figure></p>
<h3 id="7-使用自调用函数"><a href="#7-使用自调用函数" class="headerlink" title="7. 使用自调用函数"></a>7. 使用自调用函数</h3><p> 函数在创建之后直接自动执行,通常称之为自调用匿名函数（Self-Invoked Anonymous Function）或直接调用函数表达式（Immediately Invoked Function Expression ）;<br><figure class="highlight nimrod"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">(function()&#123;</span><br><span class="line">  code</span><br><span class="line">&#125;)();</span><br><span class="line">(function(a,b)&#123;</span><br><span class="line">  <span class="keyword">var</span> <span class="literal">result</span> = a + b;</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">result</span>;</span><br><span class="line">&#125;)(<span class="number">10</span>,<span class="number">20</span>);</span><br></pre></td></tr></table></figure></p>
<h3 id="8-从数组中随机获取成员"><a href="#8-从数组中随机获取成员" class="headerlink" title="8. 从数组中随机获取成员"></a>8. 从数组中随机获取成员</h3><figure class="highlight autohotkey"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var items = [<span class="number">12</span>, <span class="number">548</span> , '<span class="literal">a</span>' , <span class="number">2</span> , <span class="number">5478</span> , 'foo' , <span class="number">8852</span>, , 'Doe' , <span class="number">2145</span> , <span class="number">119</span>]<span class="comment">;</span></span><br><span class="line">var randomItem = items[Math.floor(Math.random() * items.length)]<span class="comment">;</span></span><br></pre></td></tr></table></figure>
<h3 id="9-获取指定范围内的随机数"><a href="#9-获取指定范围内的随机数" class="headerlink" title="9. 获取指定范围内的随机数"></a>9. 获取指定范围内的随机数</h3><p> 这个功能在生成测试用的假数据时特别有数,比如介与指定范围内的工资数;<br><figure class="highlight fortran"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span></span> getNum (<span class="built_in">min</span>,<span class="built_in">max</span>)&#123;</span><br><span class="line"> var x = Math.<span class="built_in">floor</span>(Math.random() * (<span class="built_in">max</span> - <span class="built_in">min</span> + <span class="number">1</span>)) + <span class="built_in">min</span>;</span><br><span class="line"> <span class="keyword">return</span> x;</span><br><span class="line">&#125;</span><br><span class="line">getNum(<span class="number">20</span>,<span class="number">30000</span>);</span><br></pre></td></tr></table></figure></p>
<h3 id="10-生成从0到指定值的数字数组"><a href="#10-生成从0到指定值的数字数组" class="headerlink" title="10. 生成从0到指定值的数字数组"></a>10. 生成从0到指定值的数字数组</h3><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getArr</span><span class="params">(max)</span>&#123;</span></span><br><span class="line">  var numbersArray = <span class="matrix">[]</span>;</span><br><span class="line">  <span class="keyword">for</span>(var <span class="built_in">i</span>=<span class="number">1</span>;<span class="built_in">i</span>&lt;=max;<span class="built_in">i</span>++)<span class="cell">&#123;</span><br><span class="line">    numbersArray.push(i);</span><br><span class="line">  &#125;</span>;</span><br><span class="line">  <span class="keyword">return</span> numbersArray;</span><br><span class="line">&#125;</span><br><span class="line">getArr(<span class="number">100</span>);</span><br></pre></td></tr></table></figure>
<h3 id="11-生成随机的字母数字字符串"><a href="#11-生成随机的字母数字字符串" class="headerlink" title="11. 生成随机的字母数字字符串"></a>11. 生成随机的字母数字字符串</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">generateRandomAlphaNum</span>(<span class="params">len</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> rdmString = <span class="string">""</span>;</span><br><span class="line">    <span class="keyword">for</span>( ; rdmString.length &lt; len; rdmString  += <span class="built_in">Math</span>.random().toString(<span class="number">36</span>).substr(<span class="number">2</span>));</span><br><span class="line">    <span class="keyword">return</span>  rdmString.substr(<span class="number">0</span>, len);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="12-打乱数字数组的顺序"><a href="#12-打乱数字数组的顺序" class="headerlink" title="12. 打乱数字数组的顺序"></a>12. 打乱数字数组的顺序</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var numbers = [<span class="number">5</span>, <span class="number">458</span> , <span class="number">120</span> , -<span class="number">215</span> , <span class="number">228</span> , <span class="number">400</span> , <span class="number">122205</span>, -<span class="number">85411</span>];</span><br><span class="line">numbers = numbers.sort(function()&#123; <span class="keyword">return</span> Math.random() - <span class="number">0.5</span>&#125;);</span><br></pre></td></tr></table></figure>
<h3 id="13-字符串去空格"><a href="#13-字符串去空格" class="headerlink" title="13. 字符串去空格"></a>13. 字符串去空格</h3><p><code>String.prototype.trim = function(){return this.replace(/^\s+|\s+$/g, &quot;&quot;);};</code></p>
<h3 id="14-数组之间追加"><a href="#14-数组之间追加" class="headerlink" title="14. 数组之间追加"></a>14. 数组之间追加</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var array1 = [<span class="number">12</span> , <span class="string">"foo"</span> , &#123;name <span class="string">"Joe"</span>&#125; , <span class="number">2458</span>];</span><br><span class="line">var array2 = [<span class="string">"Doe"</span> , <span class="number">555</span> , <span class="number">100</span>];</span><br><span class="line">Array.prototype.push.apply(array1, array2);</span><br></pre></td></tr></table></figure>
<h3 id="15-对象转换为数组"><a href="#15-对象转换为数组" class="headerlink" title="15. 对象转换为数组"></a>15. 对象转换为数组</h3><p><code>var argArray = Array.prototype.slice.call(arguments);</code></p>
<h3 id="16-验证是否是数字"><a href="#16-验证是否是数字" class="headerlink" title="16. 验证是否是数字"></a>16. 验证是否是数字</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isNunber</span>(<span class="params">n</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> !<span class="built_in">isNaN</span>(<span class="built_in">parseFloat</span>(n)) &amp;&amp; <span class="built_in">isFinite</span>(n);</span><br><span class="line">&#125;</span><br><span class="line">isNunber(<span class="number">2222.2222</span>); <span class="comment">//true</span></span><br></pre></td></tr></table></figure>
<h3 id="17-验证是否是数组"><a href="#17-验证是否是数组" class="headerlink" title="17. 验证是否是数组"></a>17. 验证是否是数组</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isArray</span>(<span class="params">obj</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Object</span>.prototype.toString.call(obj) === <span class="string">'[object Array]'</span> ;</span><br><span class="line">&#125;</span><br><span class="line">or</span><br><span class="line"><span class="built_in">Array</span>.isArray(obj);</span><br></pre></td></tr></table></figure>
<h3 id="18-获取数组中的最大值和最小值"><a href="#18-获取数组中的最大值和最小值" class="headerlink" title="18. 获取数组中的最大值和最小值"></a>18. 获取数组中的最大值和最小值</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var  numbers = [<span class="number">5</span>, <span class="number">458</span> , <span class="number">120</span> , -<span class="number">215</span> , <span class="number">228</span> , <span class="number">400</span> , <span class="number">122205</span>, -<span class="number">85411</span>]; </span><br><span class="line">var maxInNumbers = Math.max.apply(Math, numbers); </span><br><span class="line">var minInNumbers = Math.min.apply(Math, numbers);</span><br></pre></td></tr></table></figure>
<h3 id="19-清空数组"><a href="#19-清空数组" class="headerlink" title="19. 清空数组"></a>19. 清空数组</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var myArray = [<span class="number">12</span> , <span class="number">222</span> , <span class="number">1000</span> ];  </span><br><span class="line">myArray.length = <span class="number">0</span>;  <span class="comment">// myArray will be equal to [].</span></span><br></pre></td></tr></table></figure>
<h3 id="20-不要直接从数组中delete或remove元素"><a href="#20-不要直接从数组中delete或remove元素" class="headerlink" title="20. 不要直接从数组中delete或remove元素"></a>20. 不要直接从数组中delete或remove元素</h3><p> 如果对数组元素直接使用delete;其实并没有删除;只是将元素置为了undefined;数组元素删除应使用splice;</p>
<h3 id="21-使用length属性截断数组"><a href="#21-使用length属性截断数组" class="headerlink" title="21. 使用length属性截断数组"></a>21. 使用length属性截断数组</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var myArray = [<span class="number">12</span> , <span class="number">222</span> , <span class="number">1000</span> , <span class="number">124</span> , <span class="number">98</span> , <span class="number">10</span> ];  </span><br><span class="line">myArray.length = <span class="number">4</span>;  <span class="comment">// myArray will be equal to [12 , 222 , 1000 , 124].</span></span><br></pre></td></tr></table></figure>
<h3 id="22-在条件中使用逻辑与或"><a href="#22-在条件中使用逻辑与或" class="headerlink" title="22. 在条件中使用逻辑与或"></a>22. 在条件中使用逻辑与或</h3><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">doSomething</span><span class="params">(arg1)</span></span>&#123; </span><br><span class="line">    arg1 = arg1 || <span class="number">10</span>;  <span class="comment">//arg1 will have 10 as a default value if it’s not already set</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="23-使得map-函数方法对数据循环"><a href="#23-使得map-函数方法对数据循环" class="headerlink" title="23. 使得map()函数方法对数据循环"></a>23. 使得map()函数方法对数据循环</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"> <span class="built_in">map</span>() 方法返回一个由原数组中的每个元素调用一个指定方法后的返回值组成的新数组;</span><br><span class="line">var squares = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>].<span class="built_in">map</span>(function(val)&#123;<span class="keyword">return</span> val * val;&#125;);[<span class="number">1</span>,<span class="number">4</span>,<span class="number">9</span>,<span class="number">16</span>]</span><br></pre></td></tr></table></figure>
<h3 id="24-保留指定小数位数"><a href="#24-保留指定小数位数" class="headerlink" title="24. 保留指定小数位数"></a>24. 保留指定小数位数</h3><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> <span class="built_in">num</span> =<span class="number">2.443242342</span>;</span><br><span class="line"><span class="built_in">num</span> = <span class="built_in">num</span>.toFixed(<span class="number">4</span>);   <span class="comment">// num will be equal to 2.4432</span></span><br><span class="line">toFixec()返回的是字符串，不是数字;</span><br></pre></td></tr></table></figure>
<h3 id="25-浮点计算的问题"><a href="#25-浮点计算的问题" class="headerlink" title="25. 浮点计算的问题"></a>25. 浮点计算的问题</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">0.1</span> + <span class="number">0.2</span> === <span class="number">0.3</span>  <span class="comment">// is false </span></span><br><span class="line"><span class="number">9007199254740992</span> + <span class="number">1</span>  <span class="comment">// is equal to 9007199254740992</span></span><br><span class="line"><span class="number">9007199254740992</span> + <span class="number">2</span>  <span class="comment">// is equal to 9007199254740994</span></span><br></pre></td></tr></table></figure>
<h3 id="26-通过for-in循环检查对象的属性"><a href="#26-通过for-in循环检查对象的属性" class="headerlink" title="26. 通过for-in循环检查对象的属性"></a>26. 通过for-in循环检查对象的属性</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> name in <span class="class"><span class="keyword">object</span>) &#123;</span>  </span><br><span class="line">    <span class="keyword">if</span> (<span class="class"><span class="keyword">object</span>.<span class="title">hasOwnProperty</span>(</span>name)) &#123; </span><br><span class="line">         do something <span class="keyword">with</span> name</span><br><span class="line">    &#125;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="27-逗号操作符"><a href="#27-逗号操作符" class="headerlink" title="27. 逗号操作符"></a>27. 逗号操作符</h3><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">var <span class="operator">a</span> = <span class="number">0</span>; </span><br><span class="line">var b = ( <span class="operator">a</span>++, <span class="number">99</span> ); </span><br><span class="line">console.<span class="built_in">log</span>(<span class="operator">a</span>);  <span class="comment"> // a will be equal to 1 </span></span><br><span class="line">console.<span class="built_in">log</span>(b);  <span class="comment"> // b is equal to 99</span></span><br></pre></td></tr></table></figure>
<h3 id="28-临时存储用于计算和查询的变量"><a href="#28-临时存储用于计算和查询的变量" class="headerlink" title="28. 临时存储用于计算和查询的变量"></a>28. 临时存储用于计算和查询的变量</h3><p><code>var navright = document.querySelector(&#39;#right&#39;);</code></p>
<h3 id="29-提前检查传入isFinite-的参数"><a href="#29-提前检查传入isFinite-的参数" class="headerlink" title="29. 提前检查传入isFinite()的参数"></a>29. 提前检查传入isFinite()的参数</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">isFinite</span>(<span class="number">0</span>/<span class="number">0</span>) ;  <span class="comment">// false</span></span><br><span class="line"><span class="built_in">isFinite</span>(<span class="string">"foo"</span>);  <span class="comment">// false</span></span><br><span class="line"><span class="built_in">isFinite</span>(<span class="string">"10"</span>);  <span class="comment">// true</span></span><br><span class="line"><span class="built_in">isFinite</span>(<span class="number">10</span>);    <span class="comment">// true</span></span><br><span class="line"><span class="built_in">isFinite</span>(<span class="literal">undefined</span>);   <span class="comment">// false</span></span><br><span class="line"><span class="built_in">isFinite</span>();    <span class="comment">// false</span></span><br><span class="line"><span class="built_in">isFinite</span>(<span class="literal">null</span>);   <span class="comment">// true，这点当特别注意</span></span><br></pre></td></tr></table></figure>
<h3 id="30-避免在数组中使用负数做索引"><a href="#30-避免在数组中使用负数做索引" class="headerlink" title="30. 避免在数组中使用负数做索引"></a>30. 避免在数组中使用负数做索引</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var numbersArray = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>];</span><br><span class="line">var from = numbersArray.indexOf(<span class="string">"foo"</span>) ;   <span class="comment">//from is equal to -1</span></span><br><span class="line">numbersArray.splice(from,<span class="number">2</span>);    <span class="comment">// will return [5]</span></span><br></pre></td></tr></table></figure>
<h3 id="31-用JSON来序列化与反序列化"><a href="#31-用JSON来序列化与反序列化" class="headerlink" title="31. 用JSON来序列化与反序列化"></a>31. 用JSON来序列化与反序列化</h3><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">var person = &#123;<span class="string">name :</span><span class="string">'Saad'</span>, <span class="string">age :</span> <span class="number">26</span>, <span class="string">department :</span> &#123;<span class="string">ID :</span> <span class="number">15</span>, <span class="string">name :</span> <span class="string">"R&amp;D"</span>&#125; &#125;;</span><br><span class="line">var stringFromPerson = JSON.stringify(person);</span><br><span class="line"> stringFromPerson 结果为 <span class="string">"&#123;"</span>name<span class="string">":"</span>Saad<span class="string">","</span>age<span class="string">":26,"</span>department<span class="string">":&#123;"</span>ID<span class="string">":15,"</span>name<span class="string">":"</span>R&amp;D<span class="string">"&#125;&#125;"</span>   </span><br><span class="line">var personFromString = JSON.parse(stringFromPerson);</span><br><span class="line"><span class="comment">/* personFromString 的值与 person 对象相同  */</span></span><br></pre></td></tr></table></figure>
<h3 id="32-不要使用eval-或者函数构造器"><a href="#32-不要使用eval-或者函数构造器" class="headerlink" title="32. 不要使用eval()或者函数构造器"></a>32. 不要使用eval()或者函数构造器</h3><p> eval()和函数构造器（Function consturctor）的开销较大,每次调用,JavaScript引擎都要将源代码转换为可执行的代码;</p>
<h3 id="33-避免使用with"><a href="#33-避免使用with" class="headerlink" title="33. 避免使用with()"></a>33. 避免使用with()</h3><p> 使用with()可以把变量加入到全局作用域中,因此,如果有其它的同名变量,一来容易混淆,二来值也会被覆盖;</p>
<h3 id="34-不要对数组使用for-in"><a href="#34-不要对数组使用for-in" class="headerlink" title="34. 不要对数组使用for-in"></a>34. 不要对数组使用for-in</h3><h3 id="35-传给setInterval-和setTimeout-时使用函数而不是字符串"><a href="#35-传给setInterval-和setTimeout-时使用函数而不是字符串" class="headerlink" title="35. 传给setInterval()和setTimeout()时使用函数而不是字符串"></a>35. 传给setInterval()和setTimeout()时使用函数而不是字符串</h3><figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">setInterval<span class="list">(<span class="quoted">'doSomethingPeriodically</span><span class="list">()</span>', <span class="number">1000</span>)</span><span class="comment">;  </span></span><br><span class="line">setInterval<span class="list">(<span class="keyword">doSomethingPeriodically</span>, <span class="number">1000</span>)</span><span class="comment">;</span></span><br></pre></td></tr></table></figure>
<h3 id="36-使用switch-case代替一大叠的if-else"><a href="#36-使用switch-case代替一大叠的if-else" class="headerlink" title="36. 使用switch/case代替一大叠的if/else"></a>36. 使用switch/case代替一大叠的if/else</h3><p> 当判断有超过两个分支的时候使用switch/case要更快一些,而且也更优雅,更利于代码的组织,当然,如果有超过10个分支,就不要使用switch/case;</p>
<h3 id="37-在switch-case中使用数字区间"><a href="#37-在switch-case中使用数字区间" class="headerlink" title="37. 在switch/case中使用数字区间"></a>37. 在switch/case中使用数字区间</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getCategory</span>(<span class="params">age</span>)</span>&#123;</span><br><span class="line">   <span class="keyword">var</span> category = <span class="string">""</span>;</span><br><span class="line">   <span class="keyword">switch</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="built_in">isNaN</span>(age):</span><br><span class="line">      category = <span class="string">"not an age"</span>;</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> (age &gt;= <span class="number">50</span>):</span><br><span class="line">      category = <span class="string">"Old"</span>;</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> (age &lt;= <span class="number">20</span>):</span><br><span class="line">      category = <span class="string">"Baby"</span>;</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">      category = <span class="string">"Young"</span>;</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">return</span> category;</span><br><span class="line">&#125;</span><br><span class="line">getCategory(<span class="number">5</span>);</span><br></pre></td></tr></table></figure>
<h3 id="38-使用对象作为对象的原型"><a href="#38-使用对象作为对象的原型" class="headerlink" title="38. 使用对象作为对象的原型"></a>38. 使用对象作为对象的原型</h3><p> 下面这样，便可以给定对象作为参数，来创建以此为原型的新对象;<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">clone</span><span class="params">(object)</span> </span>&#123;  </span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">OneShotConstructor</span><span class="params">()</span></span>&#123;&#125;; </span><br><span class="line">    OneShotConstructor.prototype = object;  </span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> OneShotConstructor(); </span><br><span class="line">&#125; </span><br><span class="line"><span class="keyword">clone</span>(<span class="keyword">Array</span>).prototype ;   []</span><br></pre></td></tr></table></figure></p>
<h3 id="39-HTML字段转换函数"><a href="#39-HTML字段转换函数" class="headerlink" title="39. HTML字段转换函数"></a>39. HTML字段转换函数</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">escapeHTML</span>(<span class="params">text</span>) </span>&#123;  </span><br><span class="line">    <span class="keyword">var</span> replacements= &#123;<span class="string">"&lt;"</span>: <span class="string">"&amp;lt;"</span>, <span class="string">"&gt;"</span>: <span class="string">"&amp;gt;"</span>,<span class="string">"&amp;"</span>: <span class="string">"&amp;amp;"</span>, <span class="string">"\""</span>: <span class="string">"&amp;quot;"</span>&#125;;                      </span><br><span class="line">    <span class="keyword">return</span> text.replace(<span class="regexp">/[&lt;&gt;&amp;"]/g</span>, <span class="function"><span class="keyword">function</span>(<span class="params">character</span>) </span>&#123;  </span><br><span class="line">        <span class="keyword">return</span> replacements[character];  </span><br><span class="line">    &#125;);</span><br></pre></td></tr></table></figure>
<p> }</p>
<h3 id="40-不要在循环内部使用try-catch-finally"><a href="#40-不要在循环内部使用try-catch-finally" class="headerlink" title="40. 不要在循环内部使用try-catch-finally"></a>40. 不要在循环内部使用try-catch-finally</h3><p> try-catch-finally中catch部分在执行时会将异常赋给一个变量,这个变量会被构建成一个运行时作用域内的新的变量;</p>
<h3 id="41-使用XMLHttpRequests时注意设置超时"><a href="#41-使用XMLHttpRequests时注意设置超时" class="headerlink" title="41. 使用XMLHttpRequests时注意设置超时"></a>41. 使用XMLHttpRequests时注意设置超时</h3><p> XMLHttpRequests在执行时,当长时间没有响应（如出现网络问题等）时,应该中止掉连接,可以通过setTimeout()来完成这个工作:<br><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> xhr = <span class="keyword">new</span> XMLHttpRequests();</span><br><span class="line">xhr.onreadystatechange = <span class="function"><span class="keyword">function</span><span class="params">()</span></span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">this</span>.readyState == <span class="number">4</span>) &#123;  </span><br><span class="line">        clearTimeout(timeout);  </span><br><span class="line">         <span class="keyword">do</span> something <span class="keyword">with</span> response data </span><br><span class="line">    &#125; </span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> timeout = setTimeout(<span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>&#123;  </span><br><span class="line">    xhr.abort();  call error callback  </span><br><span class="line">&#125;, <span class="number">60</span>*<span class="number">1000</span> <span class="comment">/* timeout after a minute */</span>);</span><br><span class="line">xhr.open(<span class="string">'GET'</span>, url, <span class="literal">true</span>);  </span><br><span class="line">xhr.send();</span><br></pre></td></tr></table></figure></p>
<p> 同时需要注意的是，不要同时发起多个XMLHttpRequests请求</p>
<h3 id="42-时间注意原始操作符比函数调用快，使用VanillaJS"><a href="#42-时间注意原始操作符比函数调用快，使用VanillaJS" class="headerlink" title="42. 时间注意原始操作符比函数调用快，使用VanillaJS"></a>42. 时间注意原始操作符比函数调用快，使用VanillaJS</h3><figure class="highlight lasso"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">var</span> <span class="keyword">min</span> = Math<span class="built_in">.</span><span class="keyword">min</span>(a,b);</span><br><span class="line"><span class="built_in">var</span> <span class="keyword">min</span> = a &lt; b ? a : b;</span><br></pre></td></tr></table></figure>
      
    </div>

    
      

    

  </div>
</article>



</div>

  

</body>
</html>
